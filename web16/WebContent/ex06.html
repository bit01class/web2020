<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<script type="text/javascript">
	var xhr,target,btn;
	window.onload=function(){
		target=document.getElementById("target");
		btn=document.getElementsByTagName("button")[0];
		var callback=function(){
			// ajax통신
			xhr=new XMLHttpRequest();//자바스크립트 통신객체(es5~)
			xhr.onreadystatechange=function(){
				//readyState
				//0 (uninitialized) - (request가 초기화되지 않음)
				//1 (loading) - (서버와의 연결이 성사됨)
				//2 (loaded) - (서버가 request를 받음)
				//3 (interactive) - (request(요청)을 처리하는 중)
				//4 (complete) - (request에 대한 처리가 끝났으며 응답할 준비가 완료됨)
				//alert(xhr.readyState);
				/* 
				1xx (정보): 요청을 받았으며 프로세스를 계속한다
				2xx (성공): 요청을 성공적으로 받았으며 인식했고 수용하였다
				3xx (리다이렉션): 요청 완료를 위해 추가 작업 조치가 필요하다
				4xx (클라이언트 오류): 요청의 문법이 잘못되었거나 요청을 처리할 수 없다
				5xx (서버 오류): 서버가 명백히 유효한 요청에 대해 충족을 실패했다
				*/
				//xhr.status
				//200(성공): 서버가 요청을 제대로 처리했다는 뜻이다. 이는 주로 서버가 요청한 페이지를 제공했다는 의미로 쓰인다.
				//404(Not Found, 찾을 수 없음): 서버가 요청한 페이지(Resource)를 찾을 수 없다. 예를 들어 서버에 존재하지 않는 페이지에 대한 요청이 있을 경우 서버는 이 코드를 제공한다.
				//405(허용되지 않는 방법): 허가되지 않은 메서드로 접근시
				//500(내부 서버 오류): 서버에 오류가 발생하여 요청을 수행할 수 없다.
				
				if(xhr.readyState==4 && xhr.status==200){
					var msg=xhr.responseText;
					target.innerHTML=msg;
				}
			};
			xhr.open('get','ex01.html');// 통신정보
			xhr.send();
		}
		btn.addEventListener("click",callback);
	};
</script>
</head>
<body>
	<h1>비동기 통신</h1>
	<button>긁어오기</button>
	<div id="target"></div>
</body>
</html>